package customer.invoice.system;

import java.awt.Font;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumnModel;

/**
 *
 * @author C00261172
 */
public class CompanyMenu extends javax.swing.JFrame {

    /**
     * Creates new form SignUpForm
     */
    public CompanyMenu() {
        initComponents();
        Invoice.setVisible(true);
        Customer.setVisible(false);
        AddressTA.setFont(new Font("Segou UI", Font.PLAIN, 11));
        hideEditButtons();
        columnModel = InvoiceTable.getColumnModel();
        initaliseInvoices();
        
        InvoiceTable.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent event) {
//                var invoiceId = Integer.parseInt(InvoiceTable.getValueAt(InvoiceTable.getSelectedRow(), 1).toString());
//                Invoice invoice = invoices.get(invoiceId);
//                if (invoice == null) {
//                    invoice = new Invoice(invoiceId);
//                    
//                }
//                invoiceNo.setText("Invoice No. " + invoiceId);
            }
        });
    }
    
    private void hideEditButtons() {
        AddProductButton.setVisible(false);
        EditProductButton.setVisible(false);
        RemoveProductButton.setVisible(false);
        ConfirmInvoiceButton.setVisible(false);
        ConfirmCustomerButton.setVisible(false);
    }
    
    private void initaliseInvoices() {
        // Reset table with column
        InvoiceTable.setColumnModel(columnModel);
        
        // Get model with the column names
        DefaultTableModel model = (DefaultTableModel) InvoiceTable.getModel();

        DatabaseHandler handler = DatabaseHandler.getInstance();
        List<List<Object>> invoicelist = handler.get("invoiceId, date, total FROM Application.Invoice", new Object[]{}, 0);
        for (List<Object> invoice: invoicelist) {
            int invoiceId = (int)invoice.get(0);
            Date invoiceDate = (Date)invoice.get(1);
            int invoiceTotal = (int)invoice.get(2);
            Invoice createdInvoice = new Invoice(invoiceId);
            createdInvoice.getInvoiceItems();
            invoices.put(invoiceId, createdInvoice);
            model.addRow(addInvoice(invoiceId, invoiceDate, invoiceTotal));
        }
        InvoiceTable.setModel(model);
    }
    
    private Object[] addInvoice(int invoiceId, Date invoiceDate, int invoiceTotal) {
        List<String> list = new ArrayList<String>();

        list.add(Integer.toString(invoiceDate.getDay()) + "/" + Integer.toString(invoiceDate.getMonth()) + "/" + Integer.toString(invoiceDate.getYear()));
        list.add(Integer.toString(invoiceId));
        list.add(Integer.toString(invoiceTotal));

        return list.toArray();
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        TopBar = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        LogOutButton = new javax.swing.JButton();
        SettingsButton = new javax.swing.JButton();
        CustomerButton = new javax.swing.JButton();
        InvoiceButton = new javax.swing.JButton();
        BottomPanel = new javax.swing.JPanel();
        Customer = new javax.swing.JSplitPane();
        ListCustomerPanel = new javax.swing.JPanel();
        jScrollPane5 = new javax.swing.JScrollPane();
        CustomerTable = new javax.swing.JTable();
        CreateCustomerButton = new javax.swing.JButton();
        DeleteCustomerButton = new javax.swing.JButton();
        CustomerPanel = new javax.swing.JPanel();
        jLabel23 = new javax.swing.JLabel();
        CustomerFirstName = new javax.swing.JTextField();
        jLabel24 = new javax.swing.JLabel();
        jScrollPane7 = new javax.swing.JScrollPane();
        CustomerAddress = new javax.swing.JTextArea();
        jLabel25 = new javax.swing.JLabel();
        CustomerEmailAddress = new javax.swing.JTextField();
        jLabel26 = new javax.swing.JLabel();
        CustomerPhoneNumber = new javax.swing.JTextField();
        jLabel27 = new javax.swing.JLabel();
        CustomerLastName = new javax.swing.JTextField();
        jLabel28 = new javax.swing.JLabel();
        CustomerTitle = new javax.swing.JComboBox<>();
        jLabel29 = new javax.swing.JLabel();
        AmendCustomerButton = new javax.swing.JButton();
        ConfirmCustomerButton = new javax.swing.JButton();
        Invoice = new javax.swing.JSplitPane();
        ListInvoicePanel = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        InvoiceTable = new javax.swing.JTable();
        CreateButton = new javax.swing.JButton();
        DeleteButton = new javax.swing.JButton();
        InvoicePanel = new javax.swing.JPanel();
        invoiceNo = new javax.swing.JLabel();
        TitleBox = new javax.swing.JComboBox<>();
        jLabel12 = new javax.swing.JLabel();
        InvoiceDate = new com.toedter.calendar.JDateChooser();
        AmendInvoiceButton = new javax.swing.JButton();
        jLabel13 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jLabel18 = new javax.swing.JLabel();
        PhoneNumber = new javax.swing.JTextField();
        jLabel19 = new javax.swing.JLabel();
        EmailAddress = new javax.swing.JTextField();
        RemoveProductButton = new javax.swing.JButton();
        EditProductButton = new javax.swing.JButton();
        AddProductButton = new javax.swing.JButton();
        jScrollPane3 = new javax.swing.JScrollPane();
        AddressTA = new javax.swing.JTextArea();
        ConfirmInvoiceButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Company Menu");

        TopBar.setBackground(new java.awt.Color(0, 153, 255));

        jLabel1.setFont(new java.awt.Font("Gadugi", 1, 14)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setText("Testing Ltd");

        LogOutButton.setText("Log out");
        LogOutButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                LogOutButtonActionPerformed(evt);
            }
        });

        SettingsButton.setText("Settings");
        SettingsButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SettingsButtonActionPerformed(evt);
            }
        });

        CustomerButton.setBackground(new java.awt.Color(76, 181, 251));
        CustomerButton.setFont(new java.awt.Font("Gadugi", 1, 14)); // NOI18N
        CustomerButton.setForeground(new java.awt.Color(255, 255, 255));
        CustomerButton.setText("Customer");
        CustomerButton.setBorder(null);
        CustomerButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CustomerButtonActionPerformed(evt);
            }
        });

        InvoiceButton.setBackground(new java.awt.Color(76, 181, 251));
        InvoiceButton.setFont(new java.awt.Font("Gadugi", 1, 14)); // NOI18N
        InvoiceButton.setForeground(new java.awt.Color(255, 255, 255));
        InvoiceButton.setText("Invoice");
        InvoiceButton.setBorder(null);
        InvoiceButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                InvoiceButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout TopBarLayout = new javax.swing.GroupLayout(TopBar);
        TopBar.setLayout(TopBarLayout);
        TopBarLayout.setHorizontalGroup(
            TopBarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(TopBarLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addGap(46, 46, 46)
                .addComponent(InvoiceButton, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(CustomerButton, javax.swing.GroupLayout.PREFERRED_SIZE, 81, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 345, Short.MAX_VALUE)
                .addComponent(SettingsButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(LogOutButton)
                .addContainerGap())
        );
        TopBarLayout.setVerticalGroup(
            TopBarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(TopBarLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(TopBarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(LogOutButton, javax.swing.GroupLayout.PREFERRED_SIZE, 17, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(SettingsButton, javax.swing.GroupLayout.PREFERRED_SIZE, 17, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
            .addComponent(InvoiceButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(CustomerButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        BottomPanel.setLayout(new java.awt.CardLayout());

        CustomerTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "Customer No.", "Name", "Email"
            }
        ));
        CustomerTable.setToolTipText("");
        jScrollPane5.setViewportView(CustomerTable);

        CreateCustomerButton.setText("Create New Customer");

        DeleteCustomerButton.setText("Delete Selected");

        javax.swing.GroupLayout ListCustomerPanelLayout = new javax.swing.GroupLayout(ListCustomerPanel);
        ListCustomerPanel.setLayout(ListCustomerPanelLayout);
        ListCustomerPanelLayout.setHorizontalGroup(
            ListCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(ListCustomerPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(ListCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                    .addGroup(ListCustomerPanelLayout.createSequentialGroup()
                        .addComponent(CreateCustomerButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 26, Short.MAX_VALUE)
                        .addComponent(DeleteCustomerButton))))
        );
        ListCustomerPanelLayout.setVerticalGroup(
            ListCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, ListCustomerPanelLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(ListCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(CreateCustomerButton)
                    .addComponent(DeleteCustomerButton))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 342, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        Customer.setLeftComponent(ListCustomerPanel);

        CustomerPanel.setBackground(new java.awt.Color(204, 204, 204));

        jLabel23.setText("First Name:");

        CustomerFirstName.setEnabled(false);

        jLabel24.setText("Address: ");

        CustomerAddress.setColumns(20);
        CustomerAddress.setRows(5);
        CustomerAddress.setEnabled(false);
        jScrollPane7.setViewportView(CustomerAddress);

        jLabel25.setText("Email");

        CustomerEmailAddress.setEnabled(false);

        jLabel26.setText("Phone Number: ");

        CustomerPhoneNumber.setEnabled(false);

        jLabel27.setText("Last Name:");

        CustomerLastName.setEnabled(false);

        jLabel28.setText("Title:");

        CustomerTitle.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Mr", "Mrs", "Ms", "Mx" }));
        CustomerTitle.setEnabled(false);

        jLabel29.setText("Customer No.");

        AmendCustomerButton.setText("Amend");
        AmendCustomerButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AmendCustomerButtonActionPerformed(evt);
            }
        });

        ConfirmCustomerButton.setText("Ok");
        ConfirmCustomerButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ConfirmCustomerButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout CustomerPanelLayout = new javax.swing.GroupLayout(CustomerPanel);
        CustomerPanel.setLayout(CustomerPanelLayout);
        CustomerPanelLayout.setHorizontalGroup(
            CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(CustomerPanelLayout.createSequentialGroup()
                .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(CustomerPanelLayout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(CustomerPanelLayout.createSequentialGroup()
                                .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel27)
                                    .addComponent(jLabel23)
                                    .addComponent(jLabel28))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(CustomerPanelLayout.createSequentialGroup()
                                        .addComponent(CustomerTitle, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addGap(0, 0, Short.MAX_VALUE))
                                    .addComponent(CustomerLastName)
                                    .addComponent(CustomerFirstName)))
                            .addGroup(CustomerPanelLayout.createSequentialGroup()
                                .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel25)
                                    .addComponent(jLabel24))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jScrollPane7)
                                    .addComponent(CustomerEmailAddress, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(CustomerPanelLayout.createSequentialGroup()
                                .addComponent(jLabel26)
                                .addGap(12, 12, 12)
                                .addComponent(CustomerPhoneNumber, javax.swing.GroupLayout.PREFERRED_SIZE, 189, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(CustomerPanelLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel29)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 127, Short.MAX_VALUE)
                .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(AmendCustomerButton, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(ConfirmCustomerButton, javax.swing.GroupLayout.Alignment.TRAILING))
                .addContainerGap())
        );
        CustomerPanelLayout.setVerticalGroup(
            CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(CustomerPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(CustomerPanelLayout.createSequentialGroup()
                        .addComponent(jLabel29)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel28, javax.swing.GroupLayout.PREFERRED_SIZE, 16, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(CustomerTitle, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(9, 9, 9)
                        .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel23)
                            .addComponent(CustomerFirstName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel27)
                            .addComponent(CustomerLastName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel24)
                            .addComponent(jScrollPane7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(CustomerEmailAddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel25))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(CustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(CustomerPhoneNumber, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel26)))
                    .addGroup(CustomerPanelLayout.createSequentialGroup()
                        .addComponent(AmendCustomerButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(ConfirmCustomerButton)))
                .addContainerGap(118, Short.MAX_VALUE))
        );

        Customer.setRightComponent(CustomerPanel);

        BottomPanel.add(Customer, "card2");

        InvoiceTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Date", "Invoice #", "Total"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane2.setViewportView(InvoiceTable);

        CreateButton.setText("Create new Invoice");

        DeleteButton.setText("Delete Selected Invoice");
        DeleteButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                DeleteButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout ListInvoicePanelLayout = new javax.swing.GroupLayout(ListInvoicePanel);
        ListInvoicePanel.setLayout(ListInvoicePanelLayout);
        ListInvoicePanelLayout.setHorizontalGroup(
            ListInvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(ListInvoicePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(ListInvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(ListInvoicePanelLayout.createSequentialGroup()
                        .addComponent(CreateButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(DeleteButton)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                .addContainerGap())
        );
        ListInvoicePanelLayout.setVerticalGroup(
            ListInvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(ListInvoicePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(ListInvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(DeleteButton)
                    .addComponent(CreateButton))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                .addContainerGap())
        );

        Invoice.setLeftComponent(ListInvoicePanel);

        InvoicePanel.setBackground(new java.awt.Color(204, 204, 204));

        invoiceNo.setText("Invoice No. -");

        TitleBox.setEnabled(false);

        jLabel12.setText("Date:");

        InvoiceDate.setEnabled(false);

        AmendInvoiceButton.setText("Amend");
        AmendInvoiceButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AmendInvoiceButtonActionPerformed(evt);
            }
        });

        jLabel13.setText("Address: ");

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null}
            },
            new String [] {
                "ID", "Title", "Qty", "Unit Price", "Total Price"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Integer.class, java.lang.String.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }
        });
        jScrollPane1.setViewportView(jTable1);

        jLabel18.setText("Phone Number: ");

        PhoneNumber.setEnabled(false);

        jLabel19.setText("Email: ");

        EmailAddress.setEnabled(false);

        RemoveProductButton.setText("Delete Selected");

        EditProductButton.setText("Edit Selected");

        AddProductButton.setText("Add New");
        AddProductButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AddProductButtonActionPerformed(evt);
            }
        });

        AddressTA.setColumns(5);
        AddressTA.setRows(5);
        AddressTA.setEnabled(false);
        jScrollPane3.setViewportView(AddressTA);

        ConfirmInvoiceButton.setText("Ok");
        ConfirmInvoiceButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ConfirmInvoiceButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout InvoicePanelLayout = new javax.swing.GroupLayout(InvoicePanel);
        InvoicePanel.setLayout(InvoicePanelLayout);
        InvoicePanelLayout.setHorizontalGroup(
            InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(InvoicePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1)
                    .addGroup(InvoicePanelLayout.createSequentialGroup()
                        .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(InvoicePanelLayout.createSequentialGroup()
                                .addComponent(invoiceNo)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(TitleBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(InvoicePanelLayout.createSequentialGroup()
                                .addComponent(jLabel13)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(InvoicePanelLayout.createSequentialGroup()
                                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(InvoicePanelLayout.createSequentialGroup()
                                        .addComponent(jLabel12)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(InvoiceDate, javax.swing.GroupLayout.PREFERRED_SIZE, 142, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, InvoicePanelLayout.createSequentialGroup()
                                        .addComponent(jLabel18)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(PhoneNumber, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(43, 43, 43)
                                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(AmendInvoiceButton, javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(ConfirmInvoiceButton, javax.swing.GroupLayout.Alignment.TRAILING)))
                            .addGroup(InvoicePanelLayout.createSequentialGroup()
                                .addComponent(jLabel19)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(EmailAddress, javax.swing.GroupLayout.PREFERRED_SIZE, 134, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(InvoicePanelLayout.createSequentialGroup()
                                .addComponent(AddProductButton)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(EditProductButton)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(RemoveProductButton)))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        InvoicePanelLayout.setVerticalGroup(
            InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(InvoicePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(InvoicePanelLayout.createSequentialGroup()
                        .addComponent(AmendInvoiceButton)
                        .addGap(2, 2, 2)
                        .addComponent(ConfirmInvoiceButton)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(InvoicePanelLayout.createSequentialGroup()
                        .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel18)
                            .addComponent(PhoneNumber, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(TitleBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(invoiceNo))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(InvoicePanelLayout.createSequentialGroup()
                                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(InvoiceDate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel12))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel19)
                                    .addComponent(EmailAddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(AddProductButton)
                                    .addComponent(EditProductButton, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(RemoveProductButton)))
                            .addGroup(InvoicePanelLayout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addGroup(InvoicePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel13)
                                    .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(0, 0, Short.MAX_VALUE)))))
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 233, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        Invoice.setRightComponent(InvoicePanel);

        BottomPanel.add(Invoice, "card4");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(TopBar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addComponent(BottomPanel, javax.swing.GroupLayout.PREFERRED_SIZE, 792, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(TopBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(BottomPanel, javax.swing.GroupLayout.PREFERRED_SIZE, 375, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void LogOutButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_LogOutButtonActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_LogOutButtonActionPerformed

    private void SettingsButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_SettingsButtonActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_SettingsButtonActionPerformed

    private void DeleteButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_DeleteButtonActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_DeleteButtonActionPerformed

    void setInvoiceEditing() {
        TitleBox.setEnabled(editingInvoice);
        AddressTA.setEnabled(editingInvoice);
        InvoiceDate.setEnabled(editingInvoice);
        PhoneNumber.setEnabled(editingInvoice);
        EmailAddress.setEnabled(editingInvoice);
        AddProductButton.setVisible(editingInvoice);
        EditProductButton.setVisible(editingInvoice);
        RemoveProductButton.setVisible(editingInvoice);
        ConfirmInvoiceButton.setVisible(editingInvoice);
        if (editingInvoice) {
            AmendInvoiceButton.setText("View");
        } else {
            AmendInvoiceButton.setText("Amend");
        }
    }

    private void AmendInvoiceButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AmendInvoiceButtonActionPerformed
        if (selectedInvoice == null) {
            JOptionPane.showMessageDialog(null, "An invoice must be selected!",
                    "Invalid Invoice Selection", JOptionPane.ERROR_MESSAGE);
        } else {
            editingInvoice = !editingInvoice;
            setInvoiceEditing();
        }
    }//GEN-LAST:event_AmendInvoiceButtonActionPerformed

    private void AddProductButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AddProductButtonActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_AddProductButtonActionPerformed

    private void ConfirmInvoiceButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ConfirmInvoiceButtonActionPerformed
        int result = JOptionPane.showConfirmDialog(null,
                "Are you sure you want to confirm these details?", "Edit Confirmation", JOptionPane.YES_NO_OPTION);
        editingInvoice = false;
        setInvoiceEditing();
    }//GEN-LAST:event_ConfirmInvoiceButtonActionPerformed

    private void InvoiceButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_InvoiceButtonActionPerformed
        Invoice.setVisible(true);
        Customer.setVisible(false);
        editingCustomer = false;
        setCustomerEditing();
    }//GEN-LAST:event_InvoiceButtonActionPerformed

    private void CustomerButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CustomerButtonActionPerformed
        Invoice.setVisible(false);
        Customer.setVisible(true);
        editingInvoice = false;
        setInvoiceEditing();
    }//GEN-LAST:event_CustomerButtonActionPerformed

    void setCustomerEditing() {
        ConfirmCustomerButton.setVisible(editingCustomer);
        CustomerTitle.setEnabled(editingCustomer);
        CustomerFirstName.setEnabled(editingCustomer);
        CustomerLastName.setEnabled(editingCustomer);
        CustomerAddress.setEnabled(editingCustomer);
        CustomerEmailAddress.setEnabled(editingCustomer);
        CustomerPhoneNumber.setEnabled(editingCustomer);
        if (editingCustomer) {
            AmendCustomerButton.setText("View");
        } else {
            AmendCustomerButton.setText("Amend");
        }
    }

    private void AmendCustomerButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AmendCustomerButtonActionPerformed
        if (selectedCustomer == 0) {
            JOptionPane.showMessageDialog(null, "A customer must be selected!",
                    "Invalid Customer Selection", JOptionPane.ERROR_MESSAGE);
        } else {
            editingCustomer = !editingCustomer;
            setCustomerEditing();
        }
    }//GEN-LAST:event_AmendCustomerButtonActionPerformed

    private void ConfirmCustomerButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ConfirmCustomerButtonActionPerformed
        int result = JOptionPane.showConfirmDialog(null,
                "Are you sure you want to confirm these details?", "Edit Customer Confirmation", JOptionPane.YES_NO_OPTION);
        editingCustomer = false;
        setCustomerEditing();
    }//GEN-LAST:event_ConfirmCustomerButtonActionPerformed

    private DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
    private boolean editingCustomer = false;
    private boolean editingInvoice = false;
    private TableColumnModel columnModel;

    private int selectedCustomer = 0;
    private Invoice selectedInvoice = null;

    private HashMap<Integer, Invoice> invoices = new HashMap<Integer, Invoice>();
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton AddProductButton;
    private javax.swing.JTextArea AddressTA;
    private javax.swing.JButton AmendCustomerButton;
    private javax.swing.JButton AmendInvoiceButton;
    private javax.swing.JPanel BottomPanel;
    private javax.swing.JButton ConfirmCustomerButton;
    private javax.swing.JButton ConfirmInvoiceButton;
    private javax.swing.JButton CreateButton;
    private javax.swing.JButton CreateCustomerButton;
    private javax.swing.JSplitPane Customer;
    private javax.swing.JTextArea CustomerAddress;
    private javax.swing.JButton CustomerButton;
    private javax.swing.JTextField CustomerEmailAddress;
    private javax.swing.JTextField CustomerFirstName;
    private javax.swing.JTextField CustomerLastName;
    private javax.swing.JPanel CustomerPanel;
    private javax.swing.JTextField CustomerPhoneNumber;
    private javax.swing.JTable CustomerTable;
    private javax.swing.JComboBox<String> CustomerTitle;
    private javax.swing.JButton DeleteButton;
    private javax.swing.JButton DeleteCustomerButton;
    private javax.swing.JButton EditProductButton;
    private javax.swing.JTextField EmailAddress;
    private javax.swing.JSplitPane Invoice;
    private javax.swing.JButton InvoiceButton;
    private com.toedter.calendar.JDateChooser InvoiceDate;
    private javax.swing.JPanel InvoicePanel;
    private javax.swing.JTable InvoiceTable;
    private javax.swing.JPanel ListCustomerPanel;
    private javax.swing.JPanel ListInvoicePanel;
    private javax.swing.JButton LogOutButton;
    private javax.swing.JTextField PhoneNumber;
    private javax.swing.JButton RemoveProductButton;
    private javax.swing.JButton SettingsButton;
    private javax.swing.JComboBox<String> TitleBox;
    private javax.swing.JPanel TopBar;
    private javax.swing.JLabel invoiceNo;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JScrollPane jScrollPane7;
    private javax.swing.JTable jTable1;
    // End of variables declaration//GEN-END:variables
}
